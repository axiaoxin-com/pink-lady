#! /usr/bin/env bash
# 编译替换app.js

realpath() {
    [[ $1 = /* ]] && echo "$1" || echo "$PWD/${1#./}"
}

# PATHS
PROJECT_PATH=$(dirname $(dirname $(dirname $(realpath $0))))
SRC_PATH=${PROJECT_PATH}/statics/js
NOW=$(date "+%Y%m%d-%H%M%S")
NEW_NAME=${SRC_PATH}/app.min.${NOW}.js

# 压缩js
curl -X POST -s --data-urlencode 'input@${SRC_PATH}/app.js' https://javascript-minifier.com/raw > ${NEW_NAME}
